{
  "storyId": "activationcarte",
  "botId": "new_assistant",
  "name": "activationcarte",
  "description": "description",
  "debug": false,
  "mainIntent": "iactivercarte",
  "primaryIntents": [],
  "secondaryIntents": [
    "iprecisersouscription",
    "ipreciserscan",
    "ipreciseropposition",
    "ipreciserselfie",
    "iprecisercartemax",
    "ipreciserrenouvellement",
    "ipreciserchiffrescarte",
    "iprecisercarteagregee"
  ],
  "actions": [
    {
      "name": "DEMANDER_TYPE_CARTE",
      "description": "Carte Max ou agrégée ?",
      "answerId": "app_scenario_Carte Max ou agrégée ?",
      "handler": null,
      "inputContextNames": [],
      "outputContextNames": [
        "CARTE_AGREGEE",
        "CARTE_MAX"
      ],
      "final": false
    },
    {
      "name": "RESOLVE_ACTIVATION_AUTRE",
      "description": "Resolve activation autre",
      "answerId": "app_scenario_Fin - Resolve activation autre",
      "handler": "handler_set_resolve_activation_global",
      "inputContextNames": [
        "RESOLVE_ACTIVATION"
      ],
      "outputContextNames": [
        "RESOLVE_ACTIVATION_GLOBAL"
      ],
      "final": true
    },
    {
      "name": "DEMANDER_CHIFFRES_CARTE",
      "description": "4 derniers chiffres de la CB ?",
      "answerId": "app_scenario_4 derniers chiffres de la CB ?",
      "handler": null,
      "inputContextNames": [
        "OPPOSITION"
      ],
      "outputContextNames": [
        "CHIFFRES_CARTE"
      ],
      "final": false
    },
    {
      "name": "PROCEDURE_RENOUVELLEMENT",
      "description": "Pour activer la carte, il vous suffit de faire une opération avec le code PIN de la carte (retrait ou paiement) en France métropolitaine.",
      "answerId": "app_scenario_Pour activer la carte, il vous suffit de faire une opération avec le code PIN de la carte (retrait ou paiement) en France métropolitaine.",
      "handler": "handler_set_resolve_max",
      "inputContextNames": [
        "RENOUVELLEMENT"
      ],
      "outputContextNames": [
        "RESOLVE_MAX"
      ],
      "final": false
    },
    {
      "name": "PROCEDURE_SOUSCRIPTION_SCAN",
      "description": "Lors du scan de votre carte bancaire, un paiement d'authentification de 35€ a été fait.",
      "answerId": "app_scenario_Lors du scan de votre carte bancaire, un paiement d'authentification de 35€ a été fait.",
      "handler": "handler_set_resolve_max",
      "inputContextNames": [
        "SCAN_CARTE"
      ],
      "outputContextNames": [
        "RESOLVE_MAX"
      ],
      "final": false
    },
    {
      "name": "DEMANDER_SCAN_OU_SELFIE",
      "description": "Scan carte ou selfie ?",
      "answerId": "app_scenario_Scan carte ou selfie ?",
      "handler": null,
      "inputContextNames": [
        "SOUSCRIPTION"
      ],
      "outputContextNames": [
        "SCAN_CARTE",
        "SELFIE"
      ],
      "final": false
    },
    {
      "name": "RESOLVE_ACTIVATION_MAX",
      "description": "RESOLVE activation max",
      "answerId": "app_scenario_FIN - RESOLVE activation max",
      "handler": "handler_set_resolve_activation_global",
      "inputContextNames": [
        "RESOLVE_MAX"
      ],
      "outputContextNames": [
        "RESOLVE_ACTIVATION_GLOBAL"
      ],
      "final": true
    },
    {
      "name": "PROCEDURE_OPPOSITION",
      "description": "Je vais vous mettre en relation avec un conseiller pour traiter votre demande",
      "answerId": "app_scenario_Je vais vous mettre en relation avec un conseiller pour traiter votre demande",
      "handler": "handler_set_resolve_max",
      "inputContextNames": [
        "CHIFFRES_CARTE"
      ],
      "outputContextNames": [
        "RESOLVE_MAX"
      ],
      "final": false
    },
    {
      "name": "PROCEDURE_CARTE_AGREGEE",
      "description": "Lors de l'ajout de votre carte agrégée, un paiement d'authentification de 35€ est fait. On te les rend plus tard.",
      "answerId": "app_scenario_Lors de l'ajout de votre carte agrégée, un paiement d'authentification de 35€ est fait. On te les rend plus tard.",
      "handler": "handler_set_resolve_activation",
      "inputContextNames": [
        "CARTE_AGREGEE"
      ],
      "outputContextNames": [
        "RESOLVE_ACTIVATION"
      ],
      "final": false
    },
    {
      "name": "PROCEDURE_SOUSCRIPTION_SELFIE",
      "description": "Pour activer la carte, il suffit de vous rendre dans la rubrique “carte max”, de saisir ses 16 chiffres et de vous laisser guider.",
      "answerId": "app_scenario_Pour activer la carte, il suffit de vous rendre dans la rubrique “carte max”, de saisir ses 16 chiffres et de vous laisser guider.",
      "handler": "handler_set_resolve_max",
      "inputContextNames": [
        "SELFIE"
      ],
      "outputContextNames": [
        "RESOLVE_MAX"
      ],
      "final": false
    },
    {
      "name": "INTRO",
      "description": "intro",
      "answerId": null,
      "handler": null,
      "inputContextNames": [],
      "outputContextNames": [],
      "final": false
    },
    {
      "name": "DEMANDER_TYPE_ACTIVATION",
      "description": "Type d'activation ? (Souscription, opposition ou renouvellement)",
      "answerId": "app_scenario_Type d'activation ? (Souscription, opposition ou renouvellement)",
      "handler": null,
      "inputContextNames": [
        "CARTE_MAX"
      ],
      "outputContextNames": [
        "SOUSCRIPTION",
        "RENOUVELLEMENT",
        "OPPOSITION"
      ],
      "final": false
    },
    {
      "name": "RESOLVE_GLOBAL",
      "description": "resolve_global",
      "answerId": "app_scenario_FIN - resolve_global",
      "handler": null,
      "inputContextNames": [
        "RESOLVE_ACTIVATION_GLOBAL"
      ],
      "outputContextNames": [],
      "final": true
    }
  ],
  "contexts": [
        {
          "name": "CARTE_AGREGEE",
          "entityType": "app:tc_agregee",
          "entityRole": "tc_agregee"
        },
        {
          "name": "SCAN_CARTE",
          "entityType": "app:ts_scan",
          "entityRole": "ts_scan"
        },
        {
          "name": "CARTE_MAX",
          "entityType": "app:tc_max",
          "entityRole": "tc_max"
        },
        {
          "name": "RESOLVE_MAX",
          "entityType": null,
          "entityRole": null
        },
        {
          "name": "SELFIE",
          "entityType": "app:ts_selfie",
          "entityRole": "ts_selfie"
        },
        {
          "name": "OPPOSITION",
          "entityType": "app:ta_opposition",
          "entityRole": "ta_opposition"
        },
        {
          "name": "RESOLVE_ACTIVATION",
          "entityType": null,
          "entityRole": null
        },
        {
          "name": "RESOLVE_ACTIVATION_GLOBAL",
          "entityType": null,
          "entityRole": null
        },
        {
          "name": "CHIFFRES_CARTE",
          "entityType": "app:chiffres_carte",
          "entityRole": "chiffres_carte"
        },
        {
          "name": "SOUSCRIPTION",
          "entityType": "app:ta_souscription",
          "entityRole": "ta_souscription"
        },
        {
          "name": "RENOUVELLEMENT",
          "entityType": "app:ta_renouvellement",
          "entityRole": "ta_renouvellement"
        }
      ],
  "stateMachine": {
    "id": "root",
    "type": "parallel",
    "initial": "Global",
    "states": {
      "Global": {
        "id": "Global",
        "type": null,
        "initial": "INTRO",
        "states": {
          "INTRO": {
            "id": "INTRO",
            "type": null,
            "initial": null,
            "states": null,
            "on": null
          },
          "ACTIVATION_CARTE": {
            "id": "ACTIVATION_CARTE",
            "type": null,
            "initial": "RESOLVE_GLOBAL",
            "states": {
              "ACTIVATION_CARTE_MAX": {
                "id": "ACTIVATION_CARTE_MAX",
                "type": null,
                "initial": "RESOLVE_ACTIVATION_MAX",
                "states": {
                  "DEMANDER_TYPE_ACTIVATION": {
                    "id": "DEMANDER_TYPE_ACTIVATION",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "DEMANDER_SCAN_OU_SELFIE": {
                    "id": "DEMANDER_SCAN_OU_SELFIE",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "PROCEDURE_SOUSCRIPTION_SCAN": {
                    "id": "PROCEDURE_SOUSCRIPTION_SCAN",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "PROCEDURE_SOUSCRIPTION_SELFIE": {
                    "id": "PROCEDURE_SOUSCRIPTION_SELFIE",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "DEMANDER_CHIFFRES_CARTE": {
                    "id": "DEMANDER_CHIFFRES_CARTE",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "PROCEDURE_OPPOSITION": {
                    "id": "PROCEDURE_OPPOSITION",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "PROCEDURE_RENOUVELLEMENT": {
                    "id": "PROCEDURE_RENOUVELLEMENT",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "RESOLVE_ACTIVATION_MAX": {
                    "id": "RESOLVE_ACTIVATION_MAX",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  }
                },
                "on": {
                  "iprecisersouscription": "#RESOLVE_ACTIVATION_MAX",
                  "ipreciseropposition": "#RESOLVE_ACTIVATION_MAX",
                  "ipreciserrenouvellement": "#RESOLVE_ACTIVATION_MAX",
                  "ipreciserscan": "#RESOLVE_ACTIVATION_MAX",
                  "ipreciserselfie": "#RESOLVE_ACTIVATION_MAX",
                  "ipreciserchiffrescarte": "#RESOLVE_ACTIVATION_MAX"
                }
              },
              "ACTIVATION_CARTE_AGREGEE": {
                "id": "ACTIVATION_CARTE_AGREGEE",
                "type": null,
                "initial": "RESOLVE_ACTIVATION_AUTRE",
                "states": {
                  "PROCEDURE_CARTE_AGREGEE": {
                    "id": "PROCEDURE_CARTE_AGREGEE",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  },
                  "RESOLVE_ACTIVATION_AUTRE": {
                    "id": "RESOLVE_ACTIVATION_AUTRE",
                    "type": null,
                    "initial": null,
                    "states": null,
                    "on": null
                  }
                },
                "on": {}
              },
              "DEMANDER_TYPE_CARTE": {
                "id": "DEMANDER_TYPE_CARTE",
                "type": null,
                "initial": null,
                "states": null,
                "on": null
              },
              "RESOLVE_GLOBAL": {
                "id": "RESOLVE_GLOBAL",
                "type": null,
                "initial": null,
                "states": null,
                "on": null
              }
            },
            "on": {
              "iprecisercartemax": "#ACTIVATION_CARTE_MAX",
              "iprecisercarteagregee": "#ACTIVATION_CARTE_AGREGEE"
            }
          }
        },
        "on": {
          "iactivercarte": "#ACTIVATION_CARTE"
        }
      }
    },
    "on": {}
  }
}