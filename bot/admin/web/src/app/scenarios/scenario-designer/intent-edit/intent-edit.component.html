<nb-card id="modal-wrapper">
  <nb-card-header class="d-flex justify-content-between align-items-start">
    <h4>Intent definition</h4>

    <button
      nbButton
      ghost
      shape="round"
      nbTooltip="Cancel"
      (click)="cancel()"
    >
      <nb-icon icon="close-outline"></nb-icon>
    </button>
  </nb-card-header>

  <nb-card-body>
    <div>
      <label class="font-weight-bold">Status :</label>
      <span *ngIf="itemCopy.intentDefinition.intentId">
        Already exists. Will be reassigned upon publication.
      </span>
      <span *ngIf="!itemCopy.intentDefinition.intentId">
        Does not exist. Will be created upon publishing.
      </span>
    </div>
    <div *ngIf="itemCopy.intentDefinition.intentId">
      <label class="font-weight-bold">Id :</label>
      <span>
        {{ itemCopy.intentDefinition.intentId }}
      </span>
    </div>
    <div>
      <label class="font-weight-bold">Name :</label>
      <span>
        {{ itemCopy.intentDefinition.name }}
      </span>
    </div>
    <div *ngIf="itemCopy.intentDefinition.label">
      <label class="font-weight-bold">Label :</label>
      <span>
        {{ itemCopy.intentDefinition.label }}
      </span>
    </div>

    <div *ngIf="itemCopy.intentDefinition.description">
      <label class="font-weight-bold">Description :</label>
      <span>
        {{ itemCopy.intentDefinition.description }}
      </span>
    </div>
    <div *ngIf="itemCopy.intentDefinition.category">
      <label class="font-weight-bold">Category :</label>
      <span>
        {{ itemCopy.intentDefinition.category }}
      </span>
    </div>

    <hr class="my-2" />

    <strong> Questions matching this Intent :</strong>
    <div class="questions">
      <ul>
        <li
          *ngFor="let sentence of itemCopy.intentDefinition.sentences"
          class="d-flex justify-content-between align-items-start"
        >
          <div>
            {{ sentence }}
          </div>
          <div>
            <nb-icon
              icon="trash-2-outline"
              status="danger"
              (click)="removeSentence(sentence)"
              class="pointer"
              nbTooltip="Remove this formulation"
            ></nb-icon>
          </div>
        </li>
      </ul>

      <ul>
        <li
          *ngFor="let sentence of itemCopy.intentDefinition._sentences"
          class="d-flex justify-content-between align-items-start"
        >
          <div class="text-muted">
            {{ sentence }}
          </div>
        </li>
      </ul>
    </div>

    <input
      #labelInput
      nbInput
      fullWidth
      id="newQuestion"
      type="text"
      placeholder="Add a new question formulation and press enter"
      class="mt-2"
      (keyup.enter)="addSentence($event)"
    />
  </nb-card-body>

  <nb-card-footer class="d-flex justify-content-between">
    <button
      nbButton
      size="small"
      status="basic"
      class="m-1"
      (click)="cancel()"
    >
      Cancel
    </button>

    <button
      nbButton
      size="small"
      status="danger"
      class="m-1"
      (click)="dissociateIntent()"
    >
      <nb-icon icon="slash-outline"></nb-icon>
      <span *ngIf="itemCopy.intentDefinition.intentId"> Dissociate intent </span>
      <span *ngIf="!itemCopy.intentDefinition.intentId"> Delete intent </span>
    </button>

    <button
      nbButton
      size="small"
      status="primary"
      class="m-1"
      (click)="save()"
    >
      <nb-icon icon="save-outline"></nb-icon>
      Save
    </button>
  </nb-card-footer>
</nb-card>
