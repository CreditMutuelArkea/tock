<div class="d-flex justify-content-between align-items-center flex-wrap mb-2 gap-1">
  <h4 class="initial-capitalize">
    {{ this.scenario?.name }}
  </h4>

  <div class="d-flex flex-wrap header-actions">
    <button
      nbButton
      [ghost]="!isReadonly"
      [status]="isReadonly ? 'primary' : 'basic'"
      size="small"
      (click)="exit()"
      data-testid="exit-button"
    >
      <span *ngIf="!isReadonly">Cancel</span>
      <span *ngIf="isReadonly">Exit</span>
    </button>
    <button
      *ngIf="!isReadonly"
      nbButton
      size="small"
      status="primary"
      (click)="save()"
      data-testid="save-button"
    >
      Save
    </button>
    <button
      *ngIf="!isReadonly"
      nbButton
      size="small"
      status="primary"
      (click)="save(true)"
      data-testid="save-and-exit-button"
    >
      Save & exit
    </button>
  </div>
</div>

<scenario-mode-stepper
  *ngIf="scenario?.data"
  class="mb-3"
  [mode]="scenario.data.mode"
  [scenario]="scenario"
  (modeSwitch)="switchMode($event)"
></scenario-mode-stepper>

<scenario-conception
  *ngIf="scenario?.data.mode === SCENARIO_MODE.writing || scenario?.data.mode === SCENARIO_MODE.casting"
  [scenario]="scenario"
  [isReadonly]="isReadonly"
></scenario-conception>

<scenario-production
  *ngIf="scenario?.data.mode === SCENARIO_MODE.production"
  [scenario]="scenario"
  [isReadonly]="isReadonly"
></scenario-production>

<scenario-publishing
  *ngIf="scenario?.data.mode === SCENARIO_MODE.publishing"
  [scenario]="scenario"
  [isReadonly]="isReadonly"
></scenario-publishing>
