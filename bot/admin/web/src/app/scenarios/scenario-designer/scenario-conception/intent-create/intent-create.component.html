<nb-card>
  <nb-card-header class="d-flex justify-content-between align-items-start gap-1">
    <div>
      Create a new intent
      <div class="card-header-subtitle">
        There is no existing intent corresponding to the label "{{ item.text }}". Please define one below.
      </div>
    </div>
    <button
      nbButton
      ghost
      shape="round"
      nbTooltip="Cancel"
      (click)="cancel()"
    >
      <nb-icon icon="close-outline"></nb-icon>
    </button>
  </nb-card-header>

  <nb-card-body>
    <form
      [formGroup]="form"
      (submit)="save()"
    >
      <div class="d-flex flex-column mb-2">
        <tock-form-control
          label="Label"
          name="label"
          required="true"
          [controls]="label"
          [showError]="isSubmitted"
        >
          <input
            nbInput
            autofocusElement
            formControlName="label"
            fullWidth
            id="label"
            type="text"
            placeholder="Enter label"
            (keyup)="copyLabelToName()"
          />
        </tock-form-control>
      </div>

      <div class="d-flex flex-column mb-2">
        <tock-form-control
          label="Name"
          name="name"
          required="true"
          [controls]="name"
          [showError]="isSubmitted"
        >
          <input
            nbInput
            formControlName="name"
            fullWidth
            id="name"
            type="text"
            placeholder="Enter name"
            (keyup)="formatNameInput()"
            data-testid="name"
          />
        </tock-form-control>
      </div>

      <div class="d-flex flex-column mb-2">
        <tock-form-control
          label="Category"
          name="category"
          [controls]="category"
          [showError]="isSubmitted"
        >
          <tock-autocomplete-input
            formControlName="category"
            placeholder="Select category"
            name="category"
            keyLabel="category"
            [options]="categories"
          ></tock-autocomplete-input>
        </tock-form-control>
      </div>

      <div class="d-flex flex-column">
        <tock-form-control
          label="Description"
          name="description"
          [controls]="description"
          [showError]="isSubmitted"
          [hasMargin]="false"
        >
          <textarea
            nbInput
            formControlName="description"
            fullWidth
            id="description"
            type="text"
            placeholder="Enter description"
          ></textarea>
        </tock-form-control>
      </div>
    </form>
  </nb-card-body>
  <nb-card-footer class="card-footer-actions">
    <button
      nbButton
      ghost
      size="small"
      type="button"
      (click)="cancel()"
    >
      Cancel
    </button>
    <button
      nbButton
      status="primary"
      size="small"
      type="submit"
      [disabled]="!canSave"
      (click)="save()"
    >
      Save
    </button>
  </nb-card-footer>
</nb-card>
