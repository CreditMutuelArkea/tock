@import '~@nebular/theme/styles/global/_breakpoints.scss';
@import '~@nebular/theme/styles/theming';
@import '~@nebular/theme/styles/themes';

:host {
  --panel-with: 15rem;
  --panel-padding: 1rem;
  --panel-side-margin: -2.25rem;
  display: block;
  margin-left: var(--panel-side-margin);
  margin-right: var(--panel-side-margin);
  margin-bottom: -0.75rem;
  height: 75vh;
  overflow: hidden;
  box-shadow: inset 2px 2px 5px rgba($color: #000000, $alpha: 0.1);
}

@include media-breakpoint-down(md) {
  :host {
    --panel-side-margin: -1.5rem;
    margin-bottom: -0.5rem;
  }
}

@include media-breakpoint-down(sm) {
  :host {
    --panel-side-margin: -1rem;
    margin-bottom: -0rem;
  }
}

.production-wrapper {
  height: inherit;
  display: grid;
  grid-template-columns: 1fr;

  .production-menu {
    height: auto;
    overflow: auto;
    padding: var(--panel-padding);
    display: grid;
    grid-template-columns: minmax(var(--panel-with), 1fr) auto minmax(var(--panel-with), 1fr) auto var(
        --panel-with
      );
    grid-template-rows: var(--panel-with);
    grid-gap: 0.5rem;
    box-shadow: 2px 2px 5px rgba($color: #000000, $alpha: 0.1);
  }
}

@include media-breakpoint-up(lg) {
  .production-wrapper {
    grid-template-columns: var(--panel-with) 1fr;

    .production-menu {
      height: auto;
      grid-template-columns: minmax(calc(var(--panel-with) - var(--panel-padding)));
      grid-template-rows: minmax(auto, 1fr) auto minmax(auto, 1fr) auto auto;
      padding: var(--panel-padding) 0;
    }
  }
}

@include nb-install-component {
  .production-wrapper {
    .production-menu {
      & .intents-wrapper strong,
      .intents-list,
      .actions-wrapper strong,
      .actions-list,
      .user-actions-wrapper {
        padding: 0 var(--panel-padding);
      }

      .intents-wrapper {
        overflow: hidden;
        display: flex;
        flex-direction: column;
        .intents-list {
          overflow: auto;
          font-size: 0.8rem;
          .intent {
            padding: 0.2rem 0.6rem;
            background-color: nb-theme(color-info-active);
            border-radius: 1rem;
            color: nb-theme(text-control-color);
            cursor: move;

            &.disabled {
              background-color: nb-theme(color-info-disabled);
              color: nb-theme(text-basic-color);
              cursor: not-allowed;
            }
          }
        }
      }

      .actions-wrapper {
        overflow: hidden;
        display: flex;
        flex-direction: column;
        .actions-list {
          overflow: auto;
          font-size: 0.8rem;
          .action {
            background-color: nb-theme(color-basic-700);
            color: nb-theme(text-control-color);
            border-radius: 0.25rem;
            cursor: move;

            &.disabled {
              background-color: nb-theme(color-basic-transparent-600);
              color: nb-theme(text-basic-color);
              cursor: not-allowed;
            }
          }
        }
      }
    }

    .production-canvas-wrapper {
      overflow: hidden;
      .production-canvas {
        position: relative;
        width: fit-content;
        transition: transform 0.3s;
        transform-origin: 0 0;
        padding: 20px;
      }
    }
  }

  .production-menu::-webkit-scrollbar,
  .actions-list::-webkit-scrollbar,
  .intents-list::-webkit-scrollbar {
    width: nb-theme(scrollbar-width);
    height: nb-theme(scrollbar-width);
  }

  .production-menu::-webkit-scrollbar-thumb,
  .actions-list::-webkit-scrollbar-thumb,
  .intents-list::-webkit-scrollbar-thumb {
    background: nb-theme(scrollbar-color);
    cursor: pointer;
    border-radius: calc(nb-theme(scrollbar-width) / 2);
  }

  .production-menu::-webkit-scrollbar-track,
  .actions-list::-webkit-scrollbar-track,
  .intents-list::-webkit-scrollbar-track {
    background: nb-theme(scrollbar-background-color);
  }
}
