<div
  class="stateGroup unselectable"
  [dndDropzone]="getDraggableTypes()"
  [dndDisableIf]="this.state.id === 'root'"
  dndDragoverClass="dragHover"
  (dndDrop)="onDrop($event)"
>
  <div class="stateGroup-header">
    {{ state.id }}

    <div class="d-flex">
      <nb-icon
        *ngIf="state.states && state.id !== 'root'"
        class="pointer ml-1"
        icon="plus-circle-outline"
        nbTooltip="Add a state group"
        (click)="addStateGroup()"
      ></nb-icon>
      <nb-icon
        *ngIf="state.id !== 'root' && state.id !== 'Global'"
        class="pointer ml-1"
        icon="minus-circle-outline"
        nbTooltip="Remove this state"
        (click)="removeState()"
      ></nb-icon>
    </div>
  </div>

  <div
    class="stateGroup-body d-flex position-relative"
    *ngIf="state.states"
  >
    <div
      class="transitions-wrapper"
      [ngStyle]="{ 'width.px': transitionWrapperWidth }"
    >
      <ng-container *ngFor="let transition of state.on | keyvalue">
        <scenario-transition
          [transition]="{ name: transition.key, target: transition.value }"
          [parentState]="state"
          [intents]="intents"
          [actions]="actions"
          (removeTransition)="removeTransition($event)"
        ></scenario-transition>
      </ng-container>
    </div>

    <div class="actions-wrapper">
      <scenario-state-group
        *ngFor="let state of state.states | keyvalue"
        [state]="state.value"
        [stateMachine]="stateMachine"
        [usedNames]="usedNames"
        [intents]="intents"
        [actions]="actions"
      ></scenario-state-group>
    </div>
  </div>
</div>
