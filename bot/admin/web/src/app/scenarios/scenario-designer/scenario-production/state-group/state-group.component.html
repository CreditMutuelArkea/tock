<div
  class="stateGroup unselectable"
  [dndDropzone]="getDraggableTypes()"
  [dndDisableIf]="this.state.id === 'root'"
  (dndDrop)="onDrop($event)"
  dndDragoverClass="dragHover"
>
  <div class="stateGroup-header">
    {{ state.id }}

    <div class="d-flex">
      <nb-icon
        *ngIf="state.states && state.id !== 'root'"
        class="pointer ml-1"
        icon="plus-circle-outline"
        nbTooltip="Add a state group"
        (click)="addStateGroup()"
      ></nb-icon>
      <nb-icon
        *ngIf="state.id !== 'root' && state.id !== 'Global'"
        class="pointer ml-1"
        icon="minus-circle-outline"
        nbTooltip="Remove this state"
        (click)="removeState()"
      ></nb-icon>
    </div>
  </div>

  <div
    class="stateGroup-body d-flex position-relative"
    *ngIf="state.states"
  >
    <div
      class="position-relative"
      [ngStyle]="{ 'width.px': transitionWrapperWidth }"
    >
      <ng-container *ngFor="let transition of getTransitionsCache()">
        <scenario-transition
          [transition]="transition"
          (removeTransition)="removeTransition($event)"
        ></scenario-transition>
      </ng-container>

      <!-- <div
        class="transition d-flex justify-content-between position-absolute"
        *ngFor="let transition of getTransitionsCache()"
        [ngStyle]="{ 'top.px': getTransitionTop(transition) }"
      >
        {{ transition.name }}

        <nb-icon
          class="pointer ml-1"
          icon="minus-circle-outline"
          nbTooltip="Remove this transition"
          (click)="removeTransition(transition)"
        ></nb-icon>
      </div> -->
    </div>

    <div>
      <scenario-state-group
        *ngFor="let state of getStates()"
        [state]="state"
        [usedNames]="usedNames"
      ></scenario-state-group>
    </div>
  </div>
</div>
