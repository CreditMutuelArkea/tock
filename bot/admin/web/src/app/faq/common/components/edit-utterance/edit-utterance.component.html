<!--
  ~ Copyright (C) 2017/2022 e-voyageurs technologies
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<nb-card>
  <!-- DIALOG HEADER -->
  <nb-card-header status="info">{{title}}</nb-card-header>

  <!-- DIALOG BODY -->
  <nb-card-body>
    <div class="tock--notice w-100 m-auto py-2">
      Sample question a user might type or say, which matches accepted response
    </div>
    <div class="w-100 my-4">
      <label class="block m-2">Question:</label>
      <input nbInput
             type="text"
             placeholder="How many sides does a heptadecagon have?"
             (keyup.enter)="canSave() && save()"
             [(ngModel)]="value"
             [ngModelChangeDebounceTime]="1000"
             (ngModelChangeDebounced)="ensureUniq($event)"
             fullWidth fieldSize="medium"/>
    </div>
    <div *ngIf="!!existingQuestion" class="tock-alert tock--warning mx-5 p-2 mb-4">
      <div class="alert alert-warning" role="alert">
        A similar question would be replaced:
        <br/>
        <strong> {{existingQuestion}} </strong>
      </div>
    </div>
  </nb-card-body>

  <!-- DIALOG FOOTER -->
  <nb-card-footer>
    <!-- EDIT MODE -->
    <button nbButton class="float-left" (click)="cancel()" size="small" status="default" nbTooltip="Close">
      Close
    </button>
    
    <button nbButton class="float-right" *ngIf="mode=='edit'" (click)="saveAndClose()" [disabled]="!canSave()" size="small"  status="primary"  nbTooltip="Ok">
      Ok
    </button>
    
    <!-- ADD MODE -->
    <button nbButton class="float-right" *ngIf="mode=='add'" (click)="saveAndClose()" [disabled]="!canSave()" size="small"  status="primary"  nbTooltip="Add question and close">
      Add & close
    </button>
    <button nbButton class="float-right mr-2" *ngIf="mode=='add'" (click)="save()" [disabled]="!canSave()" size="small"  status="primary"  nbTooltip="Add question">
      Add
    </button>
  </nb-card-footer>
</nb-card>
