<!--
  ~ Copyright (C) 2017/2022 e-voyageurs technologies
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<nb-card>
  <!-- DIALOG HEADER -->
  <nb-card-header status="info">{{title}}</nb-card-header>

  <!-- DIALOG BODY -->
  <nb-card-body>
    <div class="tock--notice w-100 m-auto py-2">
      Sample question a user might type or say, which matches accepted response
    </div>
    <div
      [formGroup]="form"
      class="w-100 my-4"
    >
      <label class="block">Question (*)</label>
      <input
        (keyup.enter)="canSave && save()"
        formControlName="utterance"
        fullWidth
        nbInput
        placeholder="How many sides does a heptadecagon have?"
        type="text"
      />
      <tock-error-helper
        *ngIf="isSubmitted"
        [field]="utterance"
        class="d-block mt-1"
      ></tock-error-helper>
    </div>

    <div
      *ngIf="!!existingQuestion"
      class="tock-alert tock--warning mx-5 p-2 mb-4"
    >
      <div
        class="alert alert-warning"
        role="alert"
      >
        A similar question would be replaced:
        <br/>
        <strong> {{ existingQuestion }} </strong>
      </div>
    </div>

    <div
      *ngIf="existingQuestionInOtherintent"
      class="tock-alert tock--warning mx-5 p-2 mb-4"
    >
      <div
        class="alert alert-danger"
        role="alert"
      >
        This Sentence is already associated with the intent :
        <br/>
        <strong> {{ existingQuestionInOtherintent }} </strong>
      </div>
    </div>
  </nb-card-body>

  <!-- DIALOG FOOTER -->
  <nb-card-footer>
    <button
      (click)="cancel()"
      class="float-left"
      nbButton
      outline
      size="small"
      status="primary"
    >
      Cancel
    </button>

    <!-- EDIT MODE -->
    <button
      (click)="checkUtteranceAndSave(true)"
      *ngIf="mode == 'edit'"
      [disabled]="!canSave"
      class="float-right"
      nbButton
      size="small"
      status="primary"
    >
      Edit
    </button>

    <!-- ADD MODE -->
    <button
      (click)="checkUtteranceAndSave(true)"
      *ngIf="mode == 'add'"
      [disabled]="!canSave"
      class="float-right"
      nbButton
      size="small"
      status="primary"
    >
      Add & close
    </button>
    <button
      (click)="checkUtteranceAndSave()"
      *ngIf="mode == 'add'"
      [disabled]="!canSave"
      class="float-right mr-2"
      nbButton
      size="small"
      status="primary"
    >
      Add
    </button>
  </nb-card-footer>
</nb-card>
