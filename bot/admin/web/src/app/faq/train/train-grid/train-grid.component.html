<!--
  ~ Copyright (C) 2017/2022 e-voyageurs technologies
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="d-flex justify-content-between flex-nowrap">
  <tock-train-toolbar
    (onBatchAction)="onBatchAction($event)"
    (onToggleSelectAll)="onToggleSelectAll($event)"
    [allChecked]="isAllSelected()"
    [disabled]="data.length === 0"
    [ngClass]="['float-left', 'd-flex', toolbarStyleClass(), 'align-items-baseline', 'justify-content-start']">
  </tock-train-toolbar>

  <div *ngIf="total !== 0" [nbSpinner]="loading" class="paginator" nbSpinnerStatus="primary">
    <mat-paginator #paginator
                   [length]="total"
                   [ngClass]="'background'"
                   [pageIndex]="pageIndex"
                   [pageSizeOptions]="[10, 25, 50, 100]"
                   [pageSize]="pageSize">
    </mat-paginator>
  </div>
</div>

<ng-container *ngIf="currentIntents$ | async as intents">
  <br *ngIf="data.length === 0"/>
  <br *ngIf="data.length === 0"/>
  <br *ngIf="data.length === 0"/>

  <nb-card *ngIf="total === 0" [ngClass]="['mx-auto', 'w-50']">
    <nb-card-body>
      <img class="float-left d-block w-10 tock-robot"
           nbTooltip="Test action"
           src="{{baseHref}}assets/images/best_bot_gray.png"/>

      <div style="text-align: left;">
        <h6 class="tock-text-muted title">No Sentence found
          <button (click)="refresh()" class="button float-right" mat-button>
            <mat-icon>refresh</mat-icon>
          </button>
        </h6>
        <p>
          To add Sentences, start from <em>Test the Bot</em> in Tock Studio,
          or talk to the bot on any connected channel.</p>
      </div>
    </nb-card-body>
  </nb-card>

  <div (scrolled)="onScroll()" [infiniteScrollDistance]="2" [infiniteScrollThrottle]="300"
       infinite-scroll>
    <div *ngFor="let d of data">
      <tock-train-grid-item
        (onDetails)="details($event)"
        (onRemove)="refreshOnEmpty()"
        (onToggle)="onToggle($event)"
        (onUnknown)="refreshOnEmpty()"
        (onValidate)="refreshOnEmpty()"
        [intents]="intents"
        [selectionMode]="selectionMode"
        [selection]="selection"
        [sentence]="d"
        [viewMode]="viewMode">
      </tock-train-grid-item>
    </div>
  </div>
</ng-container>
